<?php
$access_token = "1000.77e4da35e0e1eb58f2d20b44b85de6e7.7f5d800b2beefa987d1bbde903e3d971";
$movies = array(
array("user_Id"=>"1699841000386979000","email_id"=>"vivek.dave@5paisa.com","role_id"=>"1699841000386979000","Emp_Code"=>"C157711","first_Name"=>"Vivek Dave","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000383270195","email_id"=>"A202633@5paisa.com","role_id"=>"1699841000383270195","Emp_Code"=>"A202633","first_Name"=>"Boni Darji","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000364716146","email_id"=>"a202554@5paisa.com","role_id"=>"1699841000364716146","Emp_Code"=>"A202554","first_Name"=>"Dharmendra Sureja","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000357589941","email_id"=>"a202544@5paisa.com","role_id"=>"1699841000357589941","Emp_Code"=>"A202544","first_Name"=>"Jagruti Mistri","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000363996378","email_id"=>"a202556@5paisa.com","role_id"=>"1699841000363996378","Emp_Code"=>"A202556","first_Name"=>"Nevida Vhora","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000364232060","email_id"=>"a202572@5paisa.com","role_id"=>"1699841000364232060","Emp_Code"=>"A202572","first_Name"=>"Saddamhusen Kureshi","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000387573019","email_id"=>"a202597@5paisa.com","role_id"=>"1699841000387573019","Emp_Code"=>"A202597","first_Name"=>"Shaik Baba","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638085026","email_id"=>"pragati.panchal@5paisa.com","role_id"=>"1699841000638085026","Emp_Code"=>"A202720","first_Name"=>"pragati panchal","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000299662769","email_id"=>"varun.arora@5paisa.com","role_id"=>"1699841000299662769","Emp_Code"=>"C156486","first_Name"=>"Varun Arora","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716485074","email_id"=>"krunal.koshti@5paisa.com","role_id"=>"1699841000716485074","Emp_Code"=>"C161115","first_Name"=>"Krunal Ashok Koshti","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716521054","email_id"=>"jay.barapatre@5paisa.com","role_id"=>"1699841000716521054","Emp_Code"=>"C161117","first_Name"=>"Jay Prakash Barapatre","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716505190","email_id"=>"rajukumar.rathaur@5paisa.com","role_id"=>"1699841000716505190","Emp_Code"=>"C161120","first_Name"=>"Rajukumar Rathaur","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716903001","email_id"=>"hiren.rathod@5paisa.com","role_id"=>"1699841000716903001","Emp_Code"=>"C161123","first_Name"=>"Hiren M Rathod","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716536089","email_id"=>"a202802@5paisa.com","role_id"=>"1699841000716536089","Emp_Code"=>"A202802","first_Name"=>"Chetan Sakrecha","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716518098","email_id"=>"a202803@5paisa.com","role_id"=>"1699841000716518098","Emp_Code"=>"A202803","first_Name"=>"Hinal Nimeshbhai Prajapati","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716496069","email_id"=>"a202800@5paisa.com","role_id"=>"1699841000716496069","Emp_Code"=>"A202800","first_Name"=>"Parth Acharya","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000716648096","email_id"=>"urvi.gondliya@5paisa.com","role_id"=>"1699841000716648096","Emp_Code"=>"C161119","first_Name"=>"Urvi Gondliya","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000771646054","email_id"=>"rahul.soni@5paisa.com","role_id"=>"1699841000771646054","Emp_Code"=>"C161639","first_Name"=>"Rahul Champaklal Soni","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000333820388","email_id"=>"harshit.patel@5paisa.com","role_id"=>"1699841000333820388","Emp_Code"=>"C161640","first_Name"=>"Harshit Patel","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000804690630","email_id"=>"hetal.shah@5paisa.com","role_id"=>"1699841000804690630","Emp_Code"=>"C162079","first_Name"=>"Hetal Jasminkumar Shah","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000771613041","email_id"=>"khilan.soni@5paisa.com","role_id"=>"1699841000771613041","Emp_Code"=>"C161638","first_Name"=>"Khilan Soni","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000771698070","email_id"=>"a202820@5paisa.com","role_id"=>"1699841000771698070","Emp_Code"=>"A202820","first_Name"=>"Abhi Bipinkumar Desai","reporting_id"=>"1699841000716547030","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000183457030","email_id"=>"narendra.gore@5paisa.com","role_id"=>"1699841000183457030","Emp_Code"=>"C153662","first_Name"=>"Narendra Gore","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000114131431","email_id"=>"a201993@5paisa.com","role_id"=>"1699841000114131431","Emp_Code"=>"A201993","first_Name"=>"Rahul Nadar","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000183347715","email_id"=>"mandar.more@5paisa.com","role_id"=>"1699841000183347715","Emp_Code"=>"C153641","first_Name"=>"Mandar More","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000183412297","email_id"=>"priyanka.bansode@5paisa.com","role_id"=>"1699841000183412297","Emp_Code"=>"C153643","first_Name"=>"Priyanka Bansode","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000369705170","email_id"=>"varsha.khairnar@5paisa.com","role_id"=>"1699841000369705170","Emp_Code"=>"C157081","first_Name"=>"Varsha Khairnar","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000371458408","email_id"=>"santosh.kshirsagar@5paisa.com","role_id"=>"1699841000371458408","Emp_Code"=>"C157088","first_Name"=>"Santosh Kshirsagar","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000183370422","email_id"=>"allwyn.pereira@5paisa.com","role_id"=>"1699841000183370422","Emp_Code"=>"C153635","first_Name"=>"allwyn pereira","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000112010060","email_id"=>"jitesh.solanki@5paisa.com","role_id"=>"1699841000112010060","Emp_Code"=>"C151772","first_Name"=>"Jitesh Solanki","reporting_id"=>"1699841000007044472","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000359947260","email_id"=>"a202553@5paisa.com","role_id"=>"1699841000359947260","Emp_Code"=>"A202553","first_Name"=>"Raj Jaskar","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000364592462","email_id"=>"bhavik.somani@5paisa.com","role_id"=>"1699841000364592462","Emp_Code"=>"C157226","first_Name"=>"bhavik somani","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000360090740","email_id"=>"hemant.patel@5paisa.com","role_id"=>"1699841000360090740","Emp_Code"=>"C157228","first_Name"=>"Hemant Patel","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000371947080","email_id"=>"kalpesh.bhanushali@5paisa.com","role_id"=>"1699841000371947080","Emp_Code"=>"C157492","first_Name"=>"kalpesh bhanushali","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000366970523","email_id"=>"kunal.sheth@5paisa.com","role_id"=>"1699841000366970523","Emp_Code"=>"C157206","first_Name"=>"Kunal sheth","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000363653948","email_id"=>"shalu.dwivedi@5paisa.com","role_id"=>"1699841000363653948","Emp_Code"=>"C157209","first_Name"=>"shalu dwivedi","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638083116","email_id"=>"a202723@5paisa.com","role_id"=>"1699841000638083116","Emp_Code"=>"A202723","first_Name"=>"Kunjal Mehta","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638082081","email_id"=>"a202724@5paisa.com","role_id"=>"1699841000638082081","Emp_Code"=>"A202724","first_Name"=>"Paras Jain","reporting_id"=>"1699841000357949756","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000379835675","email_id"=>"akshita.patel@5paisa.com","role_id"=>"1699841000379835675","Emp_Code"=>"C157500","first_Name"=>"akshita patel","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000360108004","email_id"=>"bharatsinh.chavda@5paisa.com","role_id"=>"1699841000360108004","Emp_Code"=>"C157229","first_Name"=>"Bharatsinh Chavda","reporting_id"=>"1699841000130042781","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000363550111","email_id"=>"adilkhan.pathan@5paisa.com","role_id"=>"1699841000363550111","Emp_Code"=>"C157216","first_Name"=>"adilkhan pathan","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638076005","email_id"=>"srushti.kavad@5paisa.com","role_id"=>"1699841000638076005","Emp_Code"=>"C160186","first_Name"=>"Srushti Khimajibhai Kavad","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000360003108","email_id"=>"a202563@5paisa.com","role_id"=>"1699841000360003108","Emp_Code"=>"A202563","first_Name"=>"Anshul Chauhan","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000363945502","email_id"=>"a202555@5paisa.com","role_id"=>"1699841000363945502","Emp_Code"=>"A202555","first_Name"=>"jalpa kukvav","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638103021","email_id"=>"amit.solanki@5paisa.com","role_id"=>"1699841000638103021","Emp_Code"=>"A202721","first_Name"=>"Amit Solanki","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638035110","email_id"=>"a202725@5paisa.com","role_id"=>"1699841000638035110","Emp_Code"=>"A202725","first_Name"=>"HiteshKumar Thakor","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000638107108","email_id"=>"ronak.hadiyel@5paisa.com","role_id"=>"1699841000638107108","Emp_Code"=>"C160215","first_Name"=>"Ronak Hadiyel","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000381009429","email_id"=>"nirav.patel@5paisa.com","role_id"=>"1699841000381009429","Emp_Code"=>"C157215","first_Name"=>"Nirav Patel","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000013864911","email_id"=>"mukesh.panneer@5paisa.com","role_id"=>"1699841000013864911","Emp_Code"=>"C146390","first_Name"=>"Mukesh Panneer","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000369519719","email_id"=>"dipti.sarfare@5paisa.com","role_id"=>"1699841000369519719","Emp_Code"=>"C157183","first_Name"=>"Dipti Sarfare","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000036763007","email_id"=>"ramesh.bora@5paisa.com","role_id"=>"1699841000036763007","Emp_Code"=>"C147901","first_Name"=>"Ramesh Bora","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000447080604","email_id"=>"praveen.moolya@5paisa.com","role_id"=>"1699841000447080604","Emp_Code"=>"C158311","first_Name"=>"Praveen Moolya","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000294111438","email_id"=>"a202470@5paisa.com","role_id"=>"1699841000294111438","Emp_Code"=>"A202470","first_Name"=>"Ritesh Jha","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000113448379","email_id"=>"shafiqur.khan@5paisa.com","role_id"=>"1699841000113448379","Emp_Code"=>"C151769","first_Name"=>"Shafiqur Khan","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000293881995","email_id"=>"A202467@5paisa.com","role_id"=>"1699841000293881995","Emp_Code"=>"A202467","first_Name"=>"Shubham Selot","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000294142133","email_id"=>"nilam.raut@5paisa.com","role_id"=>"1699841000294142133","Emp_Code"=>"C156306","first_Name"=>"Nilam Raut","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000183233589","email_id"=>"akash.asthana@5paisa.com","role_id"=>"1699841000183233589","Emp_Code"=>"C153667","first_Name"=>"Akash Asthana","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000012306471","email_id"=>"bhavna.kamble@5paisa.com","role_id"=>"1699841000012306471","Emp_Code"=>"C146196","first_Name"=>"Bhavna Kamble","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000575623001","email_id"=>"musarrat.khan@5paisa.com","role_id"=>"1699841000575623001","Emp_Code"=>"C159357","first_Name"=>"Musarrat Khan","reporting_id"=>"1699841000004797785","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000591438495","email_id"=>"divya.shetty@5paisa.com","role_id"=>"1699841000591438495","Emp_Code"=>"C159355","first_Name"=>"Divya Shetty","reporting_id"=>"1699841000004860116","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000606203075","email_id"=>"mohammed.kunda@5paisa.com","role_id"=>"1699841000606203075","Emp_Code"=>"C159512","first_Name"=>"mohammed Kunda","reporting_id"=>"1699841000004860116","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000606202371","email_id"=>"pratik.dhole@5paisa.com","role_id"=>"1699841000606202371","Emp_Code"=>"C159513","first_Name"=>"pratik Dhole","reporting_id"=>"1699841000004860116","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000605820785","email_id"=>"pooja.bhatt@5paisa.com","role_id"=>"1699841000605820785","Emp_Code"=>"C159514","first_Name"=>"Pooja Bhatt","reporting_id"=>"1699841000004860116","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000605505655","email_id"=>"shakshi.jain@5paisa.com","role_id"=>"1699841000605505655","Emp_Code"=>"C159516","first_Name"=>"Shakshi Jain","reporting_id"=>"1699841000004860116","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000606463188","email_id"=>"naveen.kotian@5paisa.com","role_id"=>"1699841000606463188","Emp_Code"=>"C159517","first_Name"=>"Naveen Kotian","reporting_id"=>"1699841000004860116","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000361261561","email_id"=>"ekta.rajput@5paisa.com","role_id"=>"1699841000361261561","Emp_Code"=>"C157244","first_Name"=>"Ekta Rajput","reporting_id"=>"1699841000620423068","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000367693362","email_id"=>"dhara.patel@5paisa.com","role_id"=>"1699841000367693362","Emp_Code"=>"C157268","first_Name"=>"dhara patel","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000367722063","email_id"=>"gunjanbhai.parmar@5paisa.com","role_id"=>"1699841000367722063","Emp_Code"=>"C157225","first_Name"=>"gunjanbhai parmar","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000363976283","email_id"=>"krishna.paghadar@5paisa.com","role_id"=>"1699841000363976283","Emp_Code"=>"C157221","first_Name"=>"krishna paghadar","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000371888232","email_id"=>"latta.chauhan@5paisa.com","role_id"=>"1699841000371888232","Emp_Code"=>"C157493","first_Name"=>"latta chauhan","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000383543017","email_id"=>"A202634@5paisa.com","role_id"=>"1699841000383543017","Emp_Code"=>"A202634","first_Name"=>"Rahilmohammad Mukhi","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000364112392","email_id"=>"a202561@5paisa.com","role_id"=>"1699841000364112392","Emp_Code"=>"A202561","first_Name"=>"Sohil Belim","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000371207610","email_id"=>"nehal.shah@5paisa.com ","role_id"=>"1699841000371207610","Emp_Code"=>"C157494","first_Name"=>"nehal shah","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000300606414","email_id"=>"shaktisinh.sarvaiya@5paisa.com","role_id"=>"1699841000300606414","Emp_Code"=>"C156477","first_Name"=>"Shaktisinh Sarvaiya","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""),
array("user_Id"=>"1699841000423916785","email_id"=>"bhavin.panchal@5paisa.com","role_id"=>"1699841000423916785","Emp_Code"=>"C158074","first_Name"=>"Bhavin Panchal","reporting_id"=>"1699841000437869569","last_name"=>"","State"=>""));
$userd_id_param="user_Id";
$role_id_param="role_id";
$Emp_Code_param="Emp_Code";
$reporting_id_param="reporting_id";
$last_name_param="last_name";
$state_param="state";
foreach ( $movies as $movie ) {
  foreach ( $movie as $key => $value ) {
    error_log ("<dt>$key</dt><dd>$value</dd>");
    if(strpos($key, $userd_id_param)!== false){
      $recordId = $value;
    }
    if(strpos($key, $role_id_param)!== false){
      $role_id = '"'.$value.'"';
    }
    if(strpos($key, $Emp_Code_param)!== false){
      $Emp_Code = '"'.$value.'"';
    }
    if(strpos($key, $state_param)!== false){
      $state = '"'.$value.'"';
    }
    if(strpos($key, $last_name_param)!== false){
      $last_name = '"'.$value.'"';
    }
    if(strpos($key, $reporting_id_param)!== false){
      $reporting_id = '"'.$value.'"';
    }
  }
  $url = "https://www.zohoapis.com/crm/v2/users/$recordId";
  error_log($url);
  $accesstokenparam = "Zoho-oauthtoken"." ".$access_token;
  $headers = array("Authorization: $accesstokenparam");
  $content_type = "application/json";
  //$headers->Content-type = $content_type;
  //$headers->Authorization = $accesstokenparam;
  error_log(json_encode($headers));
  $ch = curl_init();
  $param1 = '{"users":[{"Reporting_To":{"id":';
  //$param1 = '{"users":[{"role":';
  //$param10 = ',"role_id":';
  $param9 = ',"reporting_to_id":';
  $reportingid = $reporting_id;
  //$param2 = ', "Emp_Code":';
  //$param3 = ', "state":';
  $param4 = '}}]}'; 
  //$param4 = '}]}'; 
  /*
  {
    "users": [
       {
"role":"${ROLE_ID}"
        }
    ]
}*/
  
  /*
  {
     "users":[
         {
            "Reporting_To":
            {
                "id":"${REPORTING_TO_ID}"
            }
         }
     ]
}*/
  
  $json = $param1.$reportingid.$param4;
  //$json = $param1.$role_id.$param4;
  //$json = $param1.$last_name.$param10.$reportingid.$param2.$Emp_Code.$param3.$state.$param4;
  //$json = $param1.$last_name.$param2.$Emp_Code.$param3.$state.$param4;
  error_log($json);
  $result = json_decode ($json);
  curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
  curl_setopt($ch, CURLOPT_POSTFIELDS,$json);
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
  $st=curl_exec($ch);
  error_log("first response");
  error_log($st);
  $Code = "code";
  $Message = "message";
  $AlternatePhoneNumber = "invalid";
  $AlternatePhoneNumber2 = "FAILURE";
  $arr = (json_decode($st, true));
  foreach ( $arr as $key=>$val ){
    if(strpos($key, $Message)!== false){
      if(strpos($val, $AlternatePhoneNumber)!== false){
        $REFRESH_TOKEN_ID = '1000.e6c1444c8dfe5be81e2071d68c92e76b.0442c58394e29dde316f5be4057484ec';
        $CLIENT_ID = '1000.KCRJ9GWGPIJZ56008726DSCMDAUI8U';
        $CLIENT_SECRET = '034bc2464c3093c42b6605b6297af733557ffcc3cb';
        $accesstokenurl = "https://accounts.zoho.com/oauth/v2/token?refresh_token=1000.e6c1444c8dfe5be81e2071d68c92e76b.0442c58394e29dde316f5be4057484ec&client_id=1000.KCRJ9GWGPIJZ56008726DSCMDAUI8U&client_secret=034bc2464c3093c42b6605b6297af733557ffcc3cb&grant_type=refresh_token";
        //$grant_type = 'refresh_token';
        //error_log($accesstokenurl);
        $tokench = curl_init();
        $myObj->grant_type = $grant_type;
        $myObj->refresh_token = $REFRESH_TOKEN_ID;
        $myObj->client_id = $CLIENT_ID;
        $myObj->client_secret=$CLIENT_SECRET;
        $tokenjson = json_encode($myObj);
        curl_setopt($tokench, CURLOPT_CUSTOMREQUEST, "POST");
        curl_setopt($tokench, CURLOPT_URL, $accesstokenurl);
        curl_setopt($tokench, CURLOPT_RETURNTRANSFER, 1);  
        $tokenst=curl_exec($tokench);
        error_log("token response");
        error_log($tokenst);
        $access_token_param="access_token";
        $arr = (json_decode($tokenst, true));
        foreach ( $arr as $key=>$val ){
          if(strpos($key, $access_token_param)!== false){
            error_log($val);
            $access_token=$val;
            //$url = "https://www.zohoapis.com/crm/v2/users/{$recordId}";
            $url = "https://crm.zoho.com/crm/v2/Users";
            error_log($url);
            $accesstokenparam = "Zoho-oauthtoken"." ".$access_token;
            $headers = array("Authorization: $accesstokenparam");
            $content_type = "application/json";
            error_log(json_encode($headers));
            $ch = curl_init();
            $result = json_decode ($json);
            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
            curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
            curl_setopt($ch, CURLOPT_POSTFIELDS,$json);
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
            $st=curl_exec($ch);
            error_log("first response");
            error_log($st);          
          }
        }
      }
    }
  }
}
?>
